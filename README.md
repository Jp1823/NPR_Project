
# V2X Communication Simulation Project with Fog Computing

This project was developed as part of the **NPR** UC within the **RNG** specialization of the **Master’s Degree in Informatics Engineering** at the University of Minho.

The main goal was to design and implement a functional prototype of an **intelligent vehicular network**, supporting **V2X communication** and leveraging **Fog Computing** for distributed control. The simulation was carried out using the **Eclipse MOSAIC** platform in combination with the **SUMO** traffic simulator, enabling a realistic representation of vehicular mobility and road scenarios.

The simulated system includes three main types of nodes:

- **Vehicles (OBU)**  
- **Roadside Units (RSU)**  
- **Fog Node**

## Main Features

- **Dynamic CAM Messages**  
  Vehicles emit CAM messages at adaptive intervals (between 100 ms and 1 s), triggered by significant changes in position, direction, or speed.

- **Accident Alerts (AccidentEvent)**  
  Generated by the **FogApp** in case of potential collisions. These include severity levels (0 to 2) and trigger automatic emergency braking actions in target vehicles (15, 30, or 60 seconds). Messages are forwarded to the RSU closest to the target vehicle, based on its location.

- **Multihop Forwarding**  
  The **VehApp** and **RsuApp** applications select the next hop based on geographic proximity to the destination, propagating events and acknowledgment messages (ACKs) until they reach their target or the hop limit is exceeded.

- **Real-Time Neighbor Management**  
  Each node maintains an up-to-date list of neighboring nodes based on received CAMs. Entries are removed if inactive for more than 2 seconds.

- **Detailed Event Logging**  
  All applications log events such as transmissions, receptions, losses, and expirations, supporting validation, testing, and performance analysis of the network.

## Developed Applications

- **VehApp** – Deployed on vehicles, responsible for sending CAMs, receiving events, and forwarding messages.  
- **RsuApp** – Acts as a relay between vehicles and the Fog node, with access to both networks.  
- **FogApp** – Centralized processing of mobility data and generation of alert messages based on potential accident scenarios.

---

1. Criar Base de Dados:
`scenario-convert.sh --sumo2db -i proj.net.xml`

2. Adicionar rotas à base de dados:
`scenario-convert.sh --sumo2db -i proj.rou.xml -d proj.db`

3. Criar cenário mosaic (altera o .net.xml, guardar e copiar o original depois do comando):
`scenario-convert.sh --db2mosaic -d .\proj.db`

Gerar artefacto com o maven 
`mvn clean package`

Copiar o artefacto para o cenário de simulação do MOSAIC

Executar cenário:
`./mosaic.bat -s scenario -w 0 -b 1` -b opcional
ou
`mosaic.sh -s scenario -w 0 -b 1`

Notas:
- Alterar infos dos carros no `mapping/mapping_config.json`
- Atualizar a base de dados se alterar o .net.xml ou as rotas

"C:\apache-maven\apache-maven-3.9.9\bin\mvn" clean package
